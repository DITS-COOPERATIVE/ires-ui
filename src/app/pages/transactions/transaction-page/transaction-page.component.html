<script
  src="https://kit.fontawesome.com/a076d05399.js"
  crossorigin="anonymous"
></script>
<div class="container" style="overflow: hidden">
  <div class="row">
    <div class="col-lg-4 border mt-1">
      <div class="row" style="height: 15rem; overflow-y: auto">
        <div class="order-empty" *ngIf="isCartEmpty">
          <span class="order-empty text-center d-flex flex-column align-items-center">
            <i class="fas fa-shopping-cart"></i><br />This order is empty
          </span>
        </div>

        <div class="cart-items mt-4">
          <ul *ngIf="!isCartEmpty">
            <li class="p-2"
              *ngFor="let cartItem of cart; let i = index"
              [ngClass]="{
                'selected-item': i === selectedProductIndex,
                'newly-added': isNewlyAdded(cartItem),
                modified: isModified(cartItem)
              }"
              (click)="selectCartItem(cartItem, i)"
            >
              {{ cartItem.name }} <br />{{ cartItem.quantity }} Units at ₱{{ cartItem.price }}/Units 
    
              <span class="right">₱{{ (+cartItem.price * cartItem.quantity).toFixed(2) }}</span>
    
              <span *ngIf="cartItem.discount > 0">with a {{ cartItem.discount }}% discount</span>
            </li>
          </ul>
          <div class="total" >
            <span *ngIf="!isCartEmpty">Total: <b>₱ {{ getTotalPrice() }}</b> </span>
          </div>
          
        </div>
      </div>
      <div class="row">
        <div class="d-flex justify-content-around p-0">
          <button
            class="btn btn-hover w-100 rounded-0 border-dark p-0"
            type="submit"
            (click)="openDialog()"
          >
            <i class="fas fa-sticky-note"></i> Customer Note
          </button>
          <button
            class="btn btn-hover w-50 rounded-0 border-dark"
            (click)="openInfoDialog()"
          >
            <i class="fas fa-info-circle"></i> Info
          </button>
          <button class="btn btn-hover w-50 rounded-0 border-dark">
            <i class="fas fa-undo"></i> Refund
          </button>
        </div>
        <button
          class="btn btn-hover rounded-0 border-dark"
          (click)="openNoteDialog()"
        >
          <i class="fas fa-tag"></i> Internal Note
        </button>

        <div class="col-md-5">
          <div
            class="row h-25 text-center bg-lightd-flex align-items-center customer btn-hover"
          >
            <a
              routerLink="/transaction-customer/"
              style="text-decoration: none; color: inherit"
            >
              <h6>Customer</h6></a
            >
          </div>
          <div
            class="row text-center text-white paymentContainer h-75 d-flex align-items-center click-hover"
          >
            <a
              routerLink="/transactions/create"
              style="text-decoration: none; color: inherit"
              ><i class="fas fa-chevron-circle-right fs-2"
                ><h6>Payment</h6></i
              ></a
            >
          </div>
        </div>
        <div class="col-md-7">
          <div class="calculator">
            <div class="buttons">
              <div class="row">
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('1')"
                  >
                    1
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('2')"
                  >
                    2
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('3')"
                  >
                    3
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn btn-click calculator-key"
                    (click)="changeSelectedMode('quantity')"
                  >
                    QTY
                  </button>
                </div>
              </div>
              <div class="row">
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('4')"
                  >
                    4
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('5')"
                  >
                    5
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('6')"
                  >
                    6
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn calculator-key ps-1"
                    (click)="changeSelectedMode('discount')"
                  >
                     %Disc
                  </button>
                </div>
              </div>
              <div class="row">
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('7')"
                  >
                    7
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('8')"
                  >
                    8
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('9')"
                  >
                    9
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="changeSelectedMode('price')"
                  >
                    Price
                  </button>
                </div>
              </div>
              <div class="row">
                <div class="col-3">
                  <button class="btn calculator-key" (click)="toggleSign()">
                    +/-
                  </button>
                </div>

                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('0')"
                  >
                    0
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn calculator-key"
                    (click)="updateSelectedProduct('.')"
                  >
                    .
                  </button>
                </div>
                <div class="col-3">
                  <button
                    class="btn btn-delete calculator-key"
                    (click)="undo()"
                  >
                    <i class="fa fa-times"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-8 d-flex flex-wrap productsContainer">
      <div class="row d-flex w-100">
        <div
          class="col d-flex justify-content-around align-items-center category"
        >
          <i class="fa fa-home" role="img" aria-label="Home" title="Home"></i>
          <p>Wifi</p>
          <p>Software</p>
          <p>Hardware</p>
          <p>Tools</p>
        </div>
      </div>

      <div class="row just">
        <div
          class="card m-1 col-md-2 smaller-card"
          *ngFor="let item of products; let i = index"
          (click)="addToCart(item)"
        >
          <img
            [src]="item.image"
            class="card-img-top smaller-image"
            alt="Image Description"
          />
          <div
            class="card-body d-flex flex-column justify-content-start align-items-start"
          >
            <h5
              class="card-title smaller-font mb-0"
              [ngClass]="{ 'long-title': item.name.length > 10 }"
            >
              {{ item.name }}
            </h5>
            <p class="card-text smaller-font"><b>₱ </b>{{ item.price }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
